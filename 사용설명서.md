# 영상 분석 프로그램 사용설명서

## 📌 프로그램 개요

이 프로그램은 교통 영상에서 **정지 차량**과 **사람**을 자동으로 검출하여 분석하는 도구입니다.

### 주요 기능
- ✅ 실시간 차량 추적 및 정지차 판단
- ✅ 사람 검출 및 표시
- ✅ 분석 결과를 영상으로 저장
- ✅ Python 설치 불필요 (단독 실행 파일)

---

## 🚀 빠른 시작

### 1단계: 프로그램 실행
- `영상분석프로그램.exe` 파일을 더블클릭하여 실행합니다.
- Python이나 다른 프로그램 설치가 필요 없습니다.

### 2단계: 영상 선택
1. **[영상 선택]** 버튼을 클릭합니다.
2. 분석하려는 영상 파일을 선택합니다.
   - 지원 형식: MP4, AVI, MOV, MKV
3. **[폴더 선택]** 버튼을 클릭하여, 특정 폴더 내의 모든 지원 영상 파일들을 한 번에 분석 목록에 추가할 수도 있습니다.

### 3단계: 분석 시작
1. **[분석 시작]** 버튼을 클릭합니다.
2. 진행 상태가 화면에 표시됩니다.
3. 분석 완료 시 자동으로 알림이 표시됩니다.

### 4단계: 결과 확인
- 분석된 영상은 **`result`** 폴더에 자동 저장됩니다.
- 파일명: `원본파일명_analyzed.mp4`

---

## 🎨 결과 화면 설명

분석된 영상에서는 다음과 같이 객체가 표시됩니다:

| 색상 | 의미 | 설명 |
|------|------|------|
| 🟢 **초록색** | 움직이는 차량 | 정상적으로 주행 중인 차량 |
| 🔴 **빨간색** | 정지 차량 (STOP) | 일정 시간 이상 정지한 차량 |
| 🔵 **파란색** | 사람 (PERSON) | 검출된 사람 |
| 🟣 **보라색** | 역주행 차량 (WRONG WAY) | 설정된 진행 방향과 반대로 주행하는 차량 |

각 객체에는 **ID 번호**가 표시되어 추적됩니다.

---

## ⚙️ 고급 설정 (선택사항)

기본 설정으로도 충분하지만, 필요시 다음 항목을 조정할 수 있습니다:

### 역주행 감지 설정 (새로운 기능)
- **[역주행 감지 사용] 체크박스**: 역주행 감지 기능을 활성화/비활성화합니다.
- **[진행 방향 설정] 버튼**:
  - 클릭 시 영상의 첫 프레임이 나타납니다.
  - 마우스로 두 번 클릭하여 올바른 진행 방향을 나타내는 화살표(벡터)를 그립니다. (시작점 클릭 → 끝점 클릭)
  - 여러 개의 방향 벡터를 설정할 수 있습니다.
  - 설정된 방향과 반대로 움직이는 차량을 역주행으로 판단합니다.
- **역주행 판단 프레임**:
  - **기본값**: 15 프레임
  - **의미**: 이 프레임 수만큼 연속적으로 역주행이 감지되어야 최종적으로 역주행 차량으로 판단합니다.
  - **조정 팁**:
    - 값이 클수록 → 더 오랫동안 역주행해야 판단 (오검출 감소)
    - 값이 작을수록 → 더 빠르게 역주행 판단 (민감도 증가)

### 정지 판단 프레임
- **기본값**: 30 프레임 (30fps 기준 약 1초)
- **의미**: 이 프레임 수만큼 정지해야 정지차로 판단
- **조정 팁**:
  - 값이 클수록 → 더 오래 멈춰야 정지차로 판단 (오검출 감소)
  - 값이 작을수록 → 빨리 정지차로 판단 (민감도 증가)

### 최소 박스 크기
- **기본값**: 50 픽셀
- **의미**: 이보다 작은 차량은 정지 판단에서 제외
- **조정 팁**: 화면에서 멀리 있는 작은 차량 무시

### 정지 임계값 (최소)
- **기본값**: 12 픽셀
- **의미**: 이 거리 이내로만 움직이면 정지로 판단
- **조정 팁**:
  - 값이 클수록 → 약간 움직여도 정지로 판단
  - 값이 작을수록 → 완전히 멈춰야 정지로 판단

### 신뢰도 임계값
- **기본값**: 0.5
- **의미**: 이 값 이상의 신뢰도를 가진 객체만 표시
- **조정 팁**:
  - 값이 클수록 → 확실한 객체만 표시 (오검출 감소, 놓칠 수 있음)
  - 값이 작을수록 → 더 많은 객체 검출 (오검출 증가)

---

## 📁 파일 구조

```
프로그램 폴더/
├── 영상분석프로그램.exe    (실행 파일)
└── result/                  (분석 결과 저장 폴더, 자동 생성)
    └── 영상파일명_analyzed.mp4
```

